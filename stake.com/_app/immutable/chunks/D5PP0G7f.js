import{L as p,b as f,G as C,c as y}from"./DlWQCp_y.js";import{K}from"./CKZl6EQV.js";import{S as _}from"./wphDwVH-.js";import{i as G}from"./YwHh0Yq1.js";import{f as w}from"./BV84Ne7d.js";import{i as h}from"./U4d0QcJV.js";const v=21,k=["stake-engine"],O=(o,i=[])=>(o==null?void 0:o.kuratorCollection.map(r=>{var e;if(!i.includes(r.group.slug))return r;const s=(e=r.group.groupGamesList)==null?void 0:e.map(a=>({...a,game:{...a.game,playerCount:null}}));return{...r,group:{...r.group,groupGamesList:s}}}))||[],I=async(o,i=y.homepage,r)=>{var c,g;const s=((g=(c=await o.parent())==null?void 0:c.session)==null?void 0:g.locale)||p.en,e=await G(o,f.active_casino_players_flag),a=await w({doc:K,variables:{type:i,showGames:!0,isActivePlayersFeatureFlagOn:e,language:s,...r&&{limit:r}},load:o,cache:{name:"casino-home-index"}}),u=a==null?void 0:a.kuratorCollection.filter(n=>k.includes(n.group.slug));return u!=null&&u.length&&await Promise.all(u.map(async n=>{var m;const l=await w({doc:_,load:o,variables:{language:s||p.en,offset:0,showGames:!0,showProviders:!0,isActivePlayersFeatureFlagOn:h(o.params.group||"")&&await G(o,f.active_casino_players_flag),slug:n.group.slug,sort:C.newest,limit:v},cache:{name:`casino-group-${C.newest}`}}),t=a==null?void 0:a.kuratorCollection.findIndex(L=>L.group.slug===n.group.slug);t!==-1&&t&&(a.kuratorCollection[t]={...a.kuratorCollection[t],group:{...a.kuratorCollection[t].group,groupGamesList:((m=l==null?void 0:l.slugKuratorGroup)==null?void 0:m.groupGamesList)||[]}})})),e?O(a):(a==null?void 0:a.kuratorCollection)||[]};export{v as K,I as g};
