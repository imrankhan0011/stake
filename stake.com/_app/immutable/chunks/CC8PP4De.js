import{d as B,w as c,g as n}from"./Bhbbb5KL.js";import{f as p}from"./Dh9l8UfQ.js";import{g as u}from"./CFyBPWZT.js";import{M as f}from"./EFn0jNmr.js";import{b as v}from"./C4Z-GKXD.js";import{f as h}from"./BV84Ne7d.js";import{b as y}from"./BS6f7dTc.js";const _=(()=>{const a=c([]),o=c([]),r=c([]),l=B([o,a],([s,t])=>s.filter(e=>t.includes(e.id)===!1)),d=s=>{o.update(t=>t.some(i=>i.id===s.id)?t:(s.bet.__typename!=="SportBet"&&v.addStat(p(s)),[s,...t].slice(0,50)))},m=s=>{const t=n(a),e=t.find(i=>i.id===s);a.set(t.filter(i=>i.id!==s)),e?(d(e),r.set(n(r).filter(i=>i!==s))):r.update(i=>[...i,s])};return{...l,rawBetList:o,addActiveBet:s=>{const t=n(r).includes(s.id);a.update(e=>[...e,s]),t&&m(s.id)},removeActiveBet:m,addBetToRawBetList:d,load:async({load:s,isAuthenticated:t})=>{if(t)try{const e=await h({doc:f,variables:{limit:50},load:s});return y&&e!=null&&e.user&&o.set(e==null?void 0:e.user.houseBetList),e}catch{Promise.resolve()}else Promise.resolve()},init:async()=>{var e,i;const t=await u().query(f,{limit:50}).toPromise();(e=t==null?void 0:t.data)!=null&&e.user&&o.set((i=t==null?void 0:t.data)==null?void 0:i.user.houseBetList)}}})();export{_ as m};
