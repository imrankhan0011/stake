import{h as g}from"./CXRDFmD6.js";import{g as p}from"./CFyBPWZT.js";import{o as l}from"./DRfdS80Y.js";import{g as r}from"./C3Uqgz1j.js";import{g as f}from"./Bhbbb5KL.js";const k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UserHasDeposits"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"depositList"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"2"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}]},y=()=>{l&&!(window!=null&&window.dataLayer)&&function(e,i,a,n,o){e[n]=e[n]||[],e[n].push({"gtm.start":new Date().getTime(),event:"gtm.js"});const t=i.getElementsByTagName(a)[0],s=i.createElement(a),d="";s.async=!0,s.src="https://www.googletagmanager.com/gtm.js?id="+o+d,t.parentNode.insertBefore(s,t)}(window,document,"script","dataLayer",l)},w=()=>r.subscribe({initialize:()=>{y(),m({event:"initialize"})},firstUserResponse:({user:e,code:i})=>{var a,n;m({userId:e.id,code:i,isAuthenticated:!0,flags:(a=e==null?void 0:e.flags)==null?void 0:a.map(({flag:o})=>o),hash:e==null?void 0:e.intercomHash,email:e==null?void 0:e.email,username:e==null?void 0:e.name,fitToPlay:(n=e==null?void 0:e.currentPlaySession)==null?void 0:n.fitToPlay})},authenticate:e=>{var i,a,n,o;{const{user:t}=e.userAuthenticatedSession.session;m({event:e.subtype,userId:t.id,signupCode:(a=(i=t==null?void 0:t.signupCode)==null?void 0:i.code)==null?void 0:a.code,code:e==null?void 0:e.code,isAuthenticated:!0,flags:(n=t==null?void 0:t.flags)==null?void 0:n.map(({flag:s})=>s),hash:t==null?void 0:t.intercomHash,email:t==null?void 0:t.email,username:t==null?void 0:t.name,fitToPlay:(o=t==null?void 0:t.currentPlaySession)==null?void 0:o.fitToPlay})}},deposit:async({id:e,amount:i,currency:a})=>{var n,o;{const t=p(),{data:s}=await t.query(k).toPromise(),d=f(g),c=((o=(n=s==null?void 0:s.user)==null?void 0:n.depositList)==null?void 0:o.length)===1;m({event:"deposit",id:e,amount:i,currency:a,value:d*i,ftd:c})}},logout:()=>{m({event:"logout"})}});function m(e){var i;(i=window==null?void 0:window.dataLayer)==null||i.push(e)}export{m as p,w as u};
