import{t as V,H as P,I as q}from"./DlWQCp_y.js";import{i as l}from"./-2c5L_R-.js";import"./CWj6FrbW.js";import"./CN51-NxK.js";import{o as G}from"./CQrL6g3R.js";import{a as M,m as F,g as p,c as W,l as z,d as I,b as K,ad as J,f as Q,n as X,t as Y,u as $,ae as Z,p as ee,e as te}from"./jOU3gvjy.js";import{s as ae}from"./BmB745gX.js";import{i as ie}from"./Bu-FRbP6.js";import{c as ne,a as x,t as le,f as re}from"./Dy_KNm7H.js";import{i as se}from"./bB4Zh3Ev.js";import{p as f,b as oe,a as D,s as me}from"./BbnqNlY1.js";import{T as de}from"./BwMB7jJ3.js";import{i as ce}from"./Cp5EkjuV.js";import{i as w,L as ue,a as fe,b as ve}from"./BB8V_AhW.js";import{d as ge}from"./Bhbbb5KL.js";import"./BtULLpdb.js";import{r as C}from"./B8VV8e7_.js";import{H as pe}from"./Fq35cJ2x.js";import{q as ke}from"./BV84Ne7d.js";import{B as Se}from"./DabIJIna.js";const k={cancelled:l._("Cancelled"),active:l._("Active"),cashout:l._("Cashed Out"),pending:l._("Pending"),rejected:l._("Rejected"),tie:l._("Void"),loss:l._("Loss"),win:l._("Win"),halfLoss:l._("Half Loss"),halfWin:l._("Half Win"),partiallyRefunded:l._("Partially Refunded"),settled:l._("Settled"),adjusted:l._("Adjusted")},Ue=e=>{if(e==="jpWin"||e==="win")return"win";if(e==="jpPlace"||e==="place")return"place"},He=(e,t)=>{if(e.length!==2&&e.length!==3&&e.length!==4)return 0;let d=0;if(e.length===2){const[a,n]=e;for(let r=0;r<a.length;r++)for(let i=0;i<n.length;i++)a[r]!==n[i]&&d++}else if(e.length===3){const[a,n,r]=e;for(let i=0;i<a.length;i++)for(let s=0;s<n.length;s++)for(let o=0;o<r.length;o++)a[i]!==n[s]&&a[i]!==r[o]&&n[s]!==r[o]&&d++}else if(e.length===4){const[a,n,r,i]=e;for(let s=0;s<a.length;s++)for(let o=0;o<n.length;o++)for(let m=0;m<r.length;m++)for(let v=0;v<i.length;v++)a[s]!==n[o]&&a[s]!==r[m]&&a[s]!==i[v]&&n[o]!==r[m]&&n[o]!==i[v]&&r[m]!==i[v]&&d++}return t===V.quinella?d/2:d},Ve={getSettledBetStatus:e=>e.adjustments.length>0?{message:k.adjusted,variant:"light"}:e.resultType===P.WON?{message:k.win,variant:"success"}:e.resultType===P.LOST?{message:k.loss,variant:"light"}:e.resultType===P.CANCELLED?{message:k.cancelled,variant:"default"}:e.resultType===P.PARTIAL_REFUNDED?{message:k.partiallyRefunded,variant:"light"}:e.betStatus===q.rejected?{message:k.rejected,variant:"light"}:{message:k.tie,variant:"light"},mapOutcomeTypeToTranslation:(e,t=void 0,d)=>({win:t?"spWin":"fixedWin",place:t?"spPlace":"fixedPlace",...d&&t&&{win:"jpSpWin",place:"jpSpPlace"},each_way:t?"spWinOrPlace":"winOrPlace",big_six:"bigSix",first_four:"firstFour",place_n:"placeN",same_race_multi:"sameRaceMulti"})[e]||e},L={liveStream:l._("Live Stream"),liveStreamComingSoon:l._("Available soon")},_e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RacingLiveStream"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"eventId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"racingEvent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"eventId"},value:{kind:"Variable",name:{kind:"Name",value:"eventId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"stream"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"exists"}},{kind:"Field",name:{kind:"Name",value:"geoBlocked"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessToken"}},{kind:"Field",name:{kind:"Name",value:"userId"}},{kind:"Field",name:{kind:"Name",value:"fixtureId"}},{kind:"Field",name:{kind:"Name",value:"livestreamId"}}]}}]}}]}}]}}]};var he=re('<div class="inline-flex"><!></div>');function qe(e,t){M(t,!1);const d=()=>D(p(i),"$hasActiveStream",n),a=()=>D(ce,"$i18n",n),[n,r]=me(),i=F();let s=f(t,"id",8),o=f(t,"title",8),m=f(t,"streamUrl",8),v=f(t,"streamGeoBlocked",8),R=f(t,"streamEventStart",8),B=f(t,"prefixAnalyticsTag",8,""),O=f(t,"sport",24,()=>{}),U=f(t,"linkUrl",8,""),S=F(w(R(),!0));G(()=>{if(p(S))return;const c=setInterval(()=>{w(R(),!0)&&(W(S,!0),clearInterval(c))},ue);return()=>{c&&clearInterval(c)}}),z(()=>I(m()),()=>{oe(W(i,ge(C,c=>c.some(j=>j.streamUrl===m()))),"$hasActiveStream",n)}),K(),se();var A=he(),H=J(A);pe(H,{children:(c,j)=>{{let E=te(()=>(I(B()),$(()=>[B(),"racing-stream-button"].filter(Boolean).join("-"))));Se(c,{variant:"subtle-link",get"data-analytics"(){return p(E)},get disabled(){return d()},$$events:{click:async()=>{var T,N,b,u;let _=m(),h=p(S),g=null;if(!m()){const{data:y}=await ke({doc:_e,load:{fetch},variables:{eventId:s()}});_=((N=(T=y==null?void 0:y.racingEvent)==null?void 0:T.stream)==null?void 0:N.url)||null,h=!!_,g=((u=(b=y==null?void 0:y.racingEvent)==null?void 0:b.stream)==null?void 0:u.data)||null}C.add({id:s(),name:o(),streamUrl:_||"",streamGeoBlocked:v(),streamAvailable:h,linkUrl:U(),streamData:g})}},children:(_,h)=>{var g=ne(),T=Q(g);{var N=u=>{fe(u,{get sport(){return O()}})},b=u=>{ve(u,{})};ie(T,u=>{p(S)?u(N):u(b,!1)})}x(_,g)},$$slots:{default:!0}})}},$$slots:{default:!0,tooltip:(c,j)=>{de(c,{type:"body",tag:"span",size:"sm",slot:"tooltip",children:(E,_)=>{X();var h=le();Y(g=>ae(h,g),[()=>(p(S),a(),I(L),$(()=>p(S)?a()._(L.liveStream):a()._(L.liveStreamComingSoon)))]),x(E,h)},$$slots:{default:!0}})}}}),Z(A),x(e,A),ee(),r()}export{qe as B,Ue as c,He as g,k as m,Ve as r};
