import{s as l,t as d,u as f}from"./DlWQCp_y.js";import{m as c}from"./D4sAm03C.js";import{_ as w}from"./CMNPK1gw.js";var m=(e=>(e[e.win=0]="win",e[e.runner=1]="runner",e))(m||{});const M="horse-racing",W="greyhounds",j="harness",A="winPlace",I="startingPrice",x="trifecta",F="exacta",S="quinella",b="firstFour",v="SP",G=[l.result,l.final,l.interim,l.abandoned],k=4,q={lessThan5:{displayOpenPlace:!1,displayResultPlace:!1,message:e=>e._(c.lessThan5)},between5And7:{displayOpenPlace:!0,displayResultPlace:e=>e<=2,message:e=>e._(c.between5And7)},greaterThan7:{displayOpenPlace:!0,displayResultPlace:e=>e<=3,message:e=>e._(c.greaterThan7)}},J=6,B=3,$=1e6,X=6,z=2,Q=e=>{if(e){const t=parseInt(e.split(":")[0]);return parseInt(e.split(" ")[1])/t*100}},Y=e=>{if(e){const t=parseInt(e.split(":")[0]),n=parseInt(e.split(" ")[1]),s=parseInt(e.split(" ")[2]),r=parseInt(e.split(" ")[3]);return(n+s+r)/t*100}};function K({sortState:e,runners:t,isJapanese:n=!1}){return t.sort((s,r)=>{if(s.scratched)return 1;if(r.scratched)return-1;if((e==null?void 0:e.id)===m.win){const i=n?"jpWin":"win",a=s.prices.find(o=>o.marketName===i),u=r.prices.find(o=>o.marketName===i);return e.direction==="ascending"?((a==null?void 0:a.odds)||0)-((u==null?void 0:u.odds)||0):((u==null?void 0:u.odds)||0)-((a==null?void 0:a.odds)||0)}if((e==null?void 0:e.id)===m.runner){const[i,a]=[parseInt(s.runnerNumber),parseInt(r.runnerNumber)];return e.direction==="ascending"?i-a:a-i}return 0})}function V(e){return e.reduce((t,n)=>({...t,[n.market.name]:n}),{})}function Z(e=f.REFUNDED){return e===f.WON?"win":e===f.LOST?"lose":"void"}function ee(e,t,n,s){var D,T,N,g,R,O,_,P;const r=e.reduce((h,y)=>({...h,[y.name]:y}),{}),i=((D=r.SpWin)==null?void 0:D.enabled)===!1&&((T=r.SpPlace)==null?void 0:T.enabled)===!1,a=((N=r.Win)==null?void 0:N.enabled)===!1&&((g=r.Place)==null?void 0:g.enabled)===!1&&!i,u=!t&&!a,o=[];return a||o.push({id:A,route:"",markets:["win","place"],label:c.fixed,disabled:u}),i||o.push({id:I,route:"starting-price",markets:["SpWin","SpPlace"],label:n?c.jpSpFull:c.spFull}),s!==l.open||((R=r.Trifecta)!=null&&R.enabled&&o.push({id:x,route:"trifecta",markets:["trifecta"],label:c.trifecta}),(O=r.Exacta)!=null&&O.enabled&&o.push({id:F,route:"exacta",markets:["exacta"],label:c.exacta}),(_=r.Quinella)!=null&&_.enabled&&o.push({id:S,route:"quinella",markets:["quinella"],label:c.quinella}),(P=r.FirstFour)!=null&&P.enabled&&o.push({id:b,route:"first-four",markets:["firstFour"],label:c.firstFour})),o}function te({marketName:e,prices:t}){let n=t.find(s=>s.market.name===e);return e==="jpWin"&&n===null&&(e="win",n=t.find(s=>s.market.name===e)),n?[n.openingOdds,n.previousOdds,n.odds].filter(s=>typeof s=="number"):[]}const ne=e=>e===d.exacta?c.exacta:e===d.first_four?c.firstFour:e===d.quinella?c.quinella:c.trifecta,se=e=>e.toLowerCase().split(" ").map(t=>w.capitalize(t)).join(" "),E=new RegExp(/^\d{4}-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])$/),re=e=>{const t=new Date(e);return t.setDate(t.getDate()+7),t.toISOString().split("T")[0]},ae=e=>{if(!e)return{startDateTime:new Date().setHours(0,0,0,0),endDateTime:new Date().setHours(23,59,59,999)};if(E.test(e)){const[t,n,s]=e.split("-");return{startDateTime:new Date(Number(t),Number(n)-1,Number(s)).getTime(),endDateTime:new Date(Number(t),Number(n)-1,Number(s)).setHours(23,59,59,999)}}if(e==="today")return{startDateTime:new Date().setHours(0,0,0,0),endDateTime:new Date().setHours(23,59,59,999)};if(e==="tomorrow"){const t=new Date;return t.setDate(t.getDate()+1),{startDateTime:t.setHours(0,0,0,0),endDateTime:t.setHours(23,59,59,999)}}if(e==="yesterday"){const t=new Date;return t.setDate(t.getDate()-1),{startDateTime:t.setHours(0,0,0,0),endDateTime:t.setHours(23,59,59,999)}}return{startDateTime:new Date().setHours(0,0,0,0),endDateTime:new Date().setHours(23,59,59,999)}},ie=e=>{const t={};return e.forEach(n=>{typeof n.finalPosition=="number"&&(t[n.finalPosition]?t[n.finalPosition]=`${t[n.finalPosition]}/${n.runnerNumber}`:t[n.finalPosition]=n.runnerNumber.toString())}),Object.values(t).slice(0,3).join(",")},oe=e=>{const t=new Date;if(e==="today")return t;if(e==="tomorrow")return t.setDate(t.getDate()+1),t;if(e==="yesterday")return t.setDate(t.getDate()-1),t;if(E.test(e)){const[n,s,r]=e.split("-");return new Date(Number(n),Number(s)-1,Number(r))}return t},ce=e=>["closed","resulting","finished","suspended","protest","protest_dismissed","protest_upheld","dormant","false_start"].includes(e)?"closed":e==="abandoned"?"abandoned":["result","final","interim"].includes(e)?"resulted":"upcoming",p=(e,t)=>{var r,i;const n=(r=e.result)==null?void 0:r.resultedPrices;if(n)try{const a=JSON.parse(n);if(a["*"]){const u=Number(a["*"]);if(!isNaN(u))return u}}catch{}return((i=e.prices.find(a=>(t==="win"?["win","jpWin"]:["place","jpPlace"]).includes(a.marketName)))==null?void 0:i.odds)??0},L=e=>{let t=1;return e.outcomes.forEach(n=>{let s=0;n.type==="each_way"?(s+=p(n,"win"),s+=p(n,"place"),s/=2):["win","place"].includes(n.type)&&(s+=p(n,n.type.toString())),t*=s}),t},ue=(e,t=L(e))=>{var s,r;const n=e.adjustments.reduce((i,a)=>i+a.payoutMultiplier,e.payoutMultiplier||0);return(r=(s=e==null?void 0:e.betStatus)==null?void 0:s.startsWith)!=null&&r.call(s,"rejected")&&(e!=null&&e.betPotentialMultiplier)?t||e.betPotentialMultiplier:n||(e==null?void 0:e.payoutMultiplier)||t||(e==null?void 0:e.betPotentialMultiplier)||0},le=e=>{const t=new Date().setHours(0,0,0,0);return e.setHours(0,0,0,0)===t},de=e=>{const t=/^(Mrs|Miss|Mr|Ms|Master|Sir|Lady|Lord|Jr|Sr|Dame|Dr|Prof|)$/gi,n=/^(Jr|Sr|Jnr|Snr|\(Jnr\)|\(Snr\))$/gi,s=e.trim().split(" "),r=s.at(-1)&&n.test(s.at(-1))?s.pop():void 0,i=t.test(s[0])?s.shift():void 0,a=s[0],u=s.slice(1,-1).join(" "),o=s.at(-1)!==a?s.at(-1):void 0;return{title:i,firstName:a,middleNames:u,lastName:o,suffix:r}},fe=e=>{const t=e.filter(n=>!n.scratched).map(n=>{var s,r;return((r=(s=n.fastForms)==null?void 0:s.find(i=>i.name==="TOP_RATED"))==null?void 0:r.ranking)||null}).filter(n=>n!==null);return t.length===0?0:Math.min(...t.filter(Boolean).map(Number))};export{$ as A,X as D,W as G,M as H,J as N,k as R,m as S,B as a,V as b,ce as c,v as d,j as e,ae as f,oe as g,se as h,de as i,G as j,le as k,ue as l,Z as m,p as n,L as o,ne as p,Q as q,Y as r,K as s,ie as t,q as u,fe as v,te as w,ee as x,re as y,z};
