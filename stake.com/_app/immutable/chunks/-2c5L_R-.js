var j=Object.defineProperty;var L=(r,t,e)=>t in r?j(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var D=(r,t,e)=>L(r,typeof t!="symbol"?t+"":t,e);const h=r=>typeof r=="string",v=r=>typeof r=="function",F=new Map,x=new Map;function E(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n=>{if(h(n)&&(n=new Date(n)),e){const i=A(r,t),c=x.get(i);if(c)return c.format(n);const s=new Intl.DateTimeFormat(r,t);return x.set(i,s),s.format(n)}return new Intl.DateTimeFormat(r,t).format(n)}}function y(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n=>{if(e){const i=A(r,t),c=F.get(i);if(c)return c.format(n);const s=new Intl.NumberFormat(r,t);return F.set(i,s),s.format(n)}return new Intl.NumberFormat(r,t).format(n)}}function A(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return`${Array.isArray(r)?r.sort().join("-"):r}-${JSON.stringify(t)}`}const w=/\\u[a-fA-F0-9]{4}|\\x[a-fA-F0-9]{2}/g,O=function(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{plurals:void 0},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};t=t||r;const{plurals:l}=e,i=s=>h(s)?n[s]||{style:s}:s,c=(s,a)=>u=>{const o=v(a)?a(u):a,m=Array.isArray(o)?o:[o],f=Object.keys(n).length?i("number"):{},_=y(t,f)(s);return m.map(g=>h(g)?g.replace("#",_):g)};return l||console.error(`Plurals for locale ${r} aren't loaded. Use i18n.loadLocaleData method to load plurals for specific locale. Using other plural rule as a fallback.`),{plural:(s,a)=>{let{offset:u=0,...o}=a;const m=o[s]||o[l==null?void 0:l(s-u)]||o.other;return c(s-u,m)},selectordinal:(s,a)=>{let{offset:u=0,...o}=a;const m=o[s]||o[l==null?void 0:l(s-u,!0)]||o.other;return c(s-u,m)},select:(s,a)=>a[s]||a.other,number:(s,a)=>y(t,i(a))(s),date:(s,a)=>E(t,i(a))(s),undefined:s=>s}};function I(r,t,e,n,l){const i=O(r,t,l,n),c=(s,a,u)=>{const o=e[s],m=i[a](o,u),f=v(m)?m(c):m;return Array.isArray(f)?f.join(""):f};return c}function N(r,t,e,n){return function(l){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=I(t,e,l,i,n),s=u=>Array.isArray(u)?u.reduce((o,m)=>{if(h(m))return o+m;const[f,_,g]=m;let d={};g!=null&&!h(g)?Object.keys(g).forEach(b=>{d[b]=s(g[b])}):d=g;const p=c(f,_,d);return p==null?o:o+p},""):u,a=s(r);return h(a)&&w.test(a)?JSON.parse(`"${a.trim()}"`):h(a)?a.trim():a}}class S{constructor(){D(this,"_events",{})}on(t,e){return this._hasEvent(t)||(this._events[t]=[]),this._events[t].push(e),()=>this.removeListener(t,e)}removeListener(t,e){if(!this._hasEvent(t))return;const n=this._events[t].indexOf(e);~n&&this._events[t].splice(n,1)}emit(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),l=1;l<e;l++)n[l-1]=arguments[l];this._hasEvent(t)&&this._events[t].map(i=>i.apply(this,n))}_hasEvent(t){return Array.isArray(this._events[t])}}class $ extends S{constructor(t){super(),this._messages={},this._localeData={},t.missing!=null&&(this._missing=t.missing),t.messages!=null&&this.load(t.messages),t.localeData!=null&&this.loadLocaleData(t.localeData),(t.locale!=null||t.locales!=null)&&this.activate(t.locale,t.locales)}get locale(){return this._locale}get locales(){return this._locales}get messages(){return this._messages[this._locale]??{}}get localeData(){return this._localeData[this._locale]??{}}_loadLocaleData(t,e){this._localeData[t]==null?this._localeData[t]=e:Object.assign(this._localeData[t],e)}loadLocaleData(t,e){e!=null?this._loadLocaleData(t,e):Object.keys(t).forEach(n=>this._loadLocaleData(n,t[n])),this.emit("change")}_load(t,e){this._messages[t]==null?this._messages[t]=e:Object.assign(this._messages[t],e)}load(t,e){e!=null?this._load(t,e):Object.keys(t).forEach(n=>this._load(n,t[n])),this.emit("change")}activate(t,e){this._locale=t,this._locales=e,this.emit("change")}_(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{message:n,formats:l,context:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};h(t)||(e=t.values||e,n=t.message,i=t.context,t=t.id);const c=!i&&!this.messages[t],s=i&&!this.messages[i][t],a=s||c,u=this._missing;if(u&&a)return v(u)?u(this._locale,t,i):u;a&&this.emit("missing",{id:t,context:i,locale:this._locale});let o;return i&&!s?o=this.messages[i][t]||n||t:o=this.messages[t]||n||t,h(o)&&w.test(o)?JSON.parse(`"${o}"`):h(o)?o:N(o,this._locale,this._locales,this.localeData)(e,l)}date(t,e){return E(this._locales||this._locale,e)(t)}number(t,e){return y(this._locales||this._locale,e)(t)}}function M(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new $(r)}const J=M();export{J as i,M as s};
