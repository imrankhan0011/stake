import"./CWj6FrbW.js";import"./CN51-NxK.js";import{a as U,l as q,c as A,d as O,b as S,g as C,p as V,m as k,e as z}from"./jOU3gvjy.js";import{i as B}from"./bB4Zh3Ev.js";import{p as s,c as F}from"./BbnqNlY1.js";import{I as L}from"./pmRa5huc.js";var N=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],m=e=>{let t=0;for(let r=0;r<e.length;r++){let n=e[r],o=N.indexOf(n);t=t*83+o}return t},y=e=>{let t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},_=e=>{let t=Math.max(0,Math.min(1,e));return t<=.0031308?Math.trunc(t*12.92*255+.5):Math.trunc((1.055*Math.pow(t,.4166666666666667)-.055)*255+.5)},W=e=>e<0?-1:1,x=(e,t)=>W(e)*Math.pow(Math.abs(e),t),R=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},X=e=>{if(!e||e.length<6)throw new R("The blurhash string must be at least 6 characters");let t=m(e[0]),r=Math.floor(t/9)+1,n=t%9+1;if(e.length!==4+2*n*r)throw new R(`blurhash length mismatch: length is ${e.length} but it should be ${4+2*n*r}`)},Y=e=>{let t=e>>16,r=e>>8&255,n=e&255;return[y(t),y(r),y(n)]},Z=(e,t)=>{let r=Math.floor(e/361),n=Math.floor(e/19)%19,o=e%19;return[x((r-9)/9,2)*t,x((n-9)/9,2)*t,x((o-9)/9,2)*t]},D=(e,t,r,n)=>{X(e),n=n|1;let o=m(e[0]),c=Math.floor(o/9)+1,d=o%9+1,f=(m(e[1])+1)/166,u=new Array(d*c);for(let a=0;a<u.length;a++)if(a===0){let l=m(e.substring(2,6));u[a]=Y(l)}else{let l=m(e.substring(4+a*2,6+a*2));u[a]=Z(l,f*n)}let i=t*4,h=new Uint8ClampedArray(i*r);for(let a=0;a<r;a++)for(let l=0;l<t;l++){let g=0,M=0,T=0;for(let b=0;b<c;b++)for(let p=0;p<d;p++){let v=Math.cos(Math.PI*l*p/t)*Math.cos(Math.PI*a*b/r),w=u[p+b*d];g+=w[0]*v,M+=w[1]*v,T+=w[2]*v}let j=_(g),E=_(M),P=_(T);h[4*l+0+a*i]=j,h[4*l+1+a*i]=E,h[4*l+2+a*i]=P,h[4*l+3+a*i]=255}return h},J=D,I=e=>{const t=e.toString(16);return t.length===1?"0"+t:t},K=(e,t,r)=>"#"+I(e)+I(t)+I(r);function G(e){return e===0?0:`${e}%`}function Q(e,t,r){const n=[];for(let o=0,c=0;o<e.length;o+=4,c++){const d=c%t,f=Math.floor(c/t),u=Math.round(d/(t-1)*100),i=Math.round(f/(r-1)*100),h=e[o],a=e[o+1],l=e[o+2],g=`radial-gradient(at ${G(u)} ${G(i)},${K(h,a,l)},#00000000 50%)`;n.push(g)}return n}function $(e,t=4,r=3){const n=J(e,t,r);return Q(n,t,r)}function H(e,t=4,r=3){return $(e,t,r).join(",")}function lt(e,t){U(t,!1);const r=k();let n=s(t,"id",8),o=s(t,"layout",8,"constrained"),c=s(t,"width",24,()=>{}),d=s(t,"height",8),f=s(t,"src",8),u=s(t,"alt",8),i=s(t,"priority",24,()=>{}),h=s(t,"loading",24,()=>{}),a=s(t,"aspectRatio",24,()=>{}),l=s(t,"blurHash",24,()=>{}),g=s(t,"class",24,()=>{});q(()=>(O(l()),H),()=>{A(r,l()&&H(l()))}),S(),B();{let M=z(()=>f()||"");L(e,F({get id(){return n()},get src(){return C(M)},get alt(){return u()},get background(){return C(r)},get priority(){return i()},get loading(){return h()}},()=>o()==="fullWidth"?{layout:o()}:{width:c(),height:d(),layout:o()},()=>a()!==void 0&&o()==="constrained"?{aspectRatio:a()}:{aspectRatio:0},{get class(){return g()}}))}V()}export{lt as I};
