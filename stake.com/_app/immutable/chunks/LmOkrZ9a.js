import{ab as p,ac as q}from"./jOU3gvjy.js";import{w as h}from"./Bhbbb5KL.js";import{a as d}from"./CQrL6g3R.js";import{c as v,s as x,N as $,a as k,K as O,m as j,f as b,b as C,d as w,t as P,e as _}from"./CFyBPWZT.js";function l(){return(l=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n}).apply(this,arguments)}function S(n,s,a){var e={query:n,variables:s||null,context:a},t={stale:!1,fetching:!1,data:void 0,error:void 0,extensions:void 0},i=h(t),f=!1;return t.set=function(r){if(!(!r||r===t)){f=!0;var c=!1;if("query"in r||"variables"in r){var g=v(e.query,e.variables),m=v(r.query||e.query,r.variables||e.variables);g.key!==m.key&&(c=!0,e.query=r.query||e.query,e.variables=r.variables||e.variables||null)}"context"in r&&x(e.context)!==x(r.context)&&(c=!0,e.context=r.context);for(var u in r)u==="query"||u==="variables"||u==="context"||(u==="fetching"?t[u]=!!r[u]:u in t&&(t[u]=r[u]),c=!0);t.stale=!!r.stale,f=!1,c&&i.set(t)}},t.update=function(r){t.set(r(t))},t.subscribe=function(r,c){return i.subscribe(r,c)},t.reexecute=function(o){e.context=l({},o||e.context),i.set(t)},Object.keys(e).forEach(function(o){Object.defineProperty(t,o,{configurable:!1,get:function(){return e[o]},set:function(c){e[o]=c,f||i.set(t)}})}),t}function y(){return q("$$_urql")}function Q(n){p("$$_urql",n)}var V={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0};function D(n){return j(function(s){var a,e={};return n.subscribe(function(t){var i=v(t.query,t.variables);((i.context=t.context)!==e||i.key!==a)&&(a=i.key,e=t.context,s.next(i))})})}function R(n){var s=y(),a=$(function(e){n.set(e)})(k(function(e,t){return l({},e,t)},V)(O(function(e){return e.context&&e.context.pause?b({fetching:!1,stale:!1}):C([b({fetching:!0,stale:!1}),w(function(t){return l({},{fetching:!1},t,{stale:!!t.stale})})(s.executeQuery(e,e.context)),b({fetching:!1,stale:!1})])})(D(n))));return d(a.unsubscribe),n}function z(n){var s=y(),a=typeof n.subscribe!="function"?S(n.query,n.variables):n;return function(e,t){var i={fetching:!0,variables:e||a.variables,context:t||a.context};return a.set(i),P(_(1)(s.executeMutation(v(a.query,a.variables||{}),a.context))).then(function(f){var o=l({},{fetching:!1},f);return a.set(o),a})}}export{z as m,S as o,R as q,Q as s};
