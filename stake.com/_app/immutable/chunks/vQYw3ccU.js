import{h as I}from"./CFyBPWZT.js";import{w as h}from"./Bhbbb5KL.js";import{f as M}from"./BV84Ne7d.js";import{o as g}from"./CQrL6g3R.js";function _({queryDocument:m,subscriptionDocument:f,queryVariables:l,getQueryPath:L,getSubscriptionPath:T}){const n=h({data:[],loading:!1}),d=async(s,i={})=>{n.set({data:[],loading:!0});const o=await M({doc:m,variables:{limit:10,...l,...i},load:s}),t=L(o);return n.set({data:t||[],loading:!1}),o},u=(s,i,o=()=>!1)=>{const t=i.limit||10;return d(s,{limit:t}),{unsubscribe:I({doc:f},c=>{const a=T(c==null?void 0:c.data);a&&!o()&&n.update(r=>{const p=r.data.some(e=>(e==null?void 0:e.id)===(a==null?void 0:a.id));return{...r,data:p?r.data:[a,...r.data].slice(0,t)}})})}};function b({load:s,fetchVariables:i,isPaused:o}){g(()=>{{const t=u(s,i,o);return()=>{t==null||t.unsubscribe()}}})}return{store:n,load:d,subscribeToBets:u,subscribeToBetsOnMount:b}}export{_ as c};
