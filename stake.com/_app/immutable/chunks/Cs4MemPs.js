import{O as x,ar as L,as as M,X as B,u as U,M as j,at as q,Z as G,au as N,a1 as p,av as K,aw as P,ax as W}from"./jOU3gvjy.js";import{l as X}from"./BGGTUj09.js";import{a as Z}from"./BmB745gX.js";function O(a,r){p(()=>{a.dispatchEvent(new CustomEvent(r))})}function g(a){if(a==="float")return"cssFloat";if(a==="offset")return"cssOffset";if(a.startsWith("--"))return a;const r=a.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(i=>i[0].toUpperCase()+i.slice(1)).join("")}function S(a){const r={},i=a.split(";");for(const t of i){const[v,_]=t.split(":");if(!v||_===void 0)break;const d=g(v.trim());r[d]=_.trim()}return r}const z=a=>a;function Q(a,r,i,t){var v=(a&P)!==0,_=(a&W)!==0,d=v&&_,w=(a&K)!==0,A=d?"both":v?"in":"out",h,n=r.inert,b=r.style.overflow,f,s;function T(){return p(()=>h??(h=i()(r,(t==null?void 0:t())??{},{direction:A})))}var e={is_global:w,in(){var u;if(r.inert=n,!v){s==null||s.abort(),(u=s==null?void 0:s.reset)==null||u.call(s);return}_||f==null||f.abort(),O(r,"introstart"),f=I(r,T(),s,1,()=>{O(r,"introend"),f==null||f.abort(),f=h=void 0,r.style.overflow=b})},out(u){if(!_){u==null||u(),h=void 0;return}r.inert=!0,O(r,"outrostart"),s=I(r,T(),f,0,()=>{O(r,"outroend"),u==null||u()})},stop:()=>{f==null||f.abort(),s==null||s.abort()}},c=j;if((c.transitions??(c.transitions=[])).push(e),v&&Z){var l=w;if(!l){for(var o=c.parent;o&&o.f&x;)for(;(o=o.parent)&&!(o.f&L););l=!o||(o.f&M)!==0}l&&B(()=>{U(()=>e.in())})}}function I(a,r,i,t,v){var _=t===1;if(q(r)){var d,w=!1;return G(()=>{if(!w){var c=r({direction:_?"in":"out"});d=I(a,c,i,t,v)}}),{abort:()=>{w=!0,d==null||d.abort()},deactivate:()=>d.deactivate(),reset:()=>d.reset(),t:()=>d.t()}}if(i==null||i.deactivate(),!(r!=null&&r.duration))return v(),{abort:N,deactivate:N,reset:N,t:()=>t};const{delay:A=0,css:h,tick:n,easing:b=z}=r;var f=[];if(_&&i===void 0&&(n&&n(0,1),h)){var s=S(h(0,1));f.push(s,s)}var T=()=>1-t,e=a.animate(f,{duration:A,fill:"forwards"});return e.onfinish=()=>{e.cancel();var c=(i==null?void 0:i.t())??1-t;i==null||i.abort();var l=t-c,o=r.duration*Math.abs(l),u=[];if(o>0){var y=!1;if(h)for(var C=Math.ceil(o/16.666666666666668),F=0;F<=C;F+=1){var R=c+l*b(F/C),m=S(h(R,1-R));u.push(m),y||(y=m.overflow==="hidden")}y&&(a.style.overflow="hidden"),T=()=>{var E=e.currentTime;return c+l*b(E/o)},n&&X(()=>{if(e.playState!=="running")return!1;var E=T();return n(E,1-E),!0})}e=a.animate(u,{duration:o,fill:"forwards"}),e.onfinish=()=>{T=()=>t,n==null||n(t,1-t),v()}},{abort:()=>{e&&(e.cancel(),e.effect=null,e.onfinish=N)},deactivate:()=>{v=N},reset:()=>{t===0&&(n==null||n(1,0))},t:()=>T()}}export{Q as t};
